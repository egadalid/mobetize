{
  "swagger": "2.0",
  "info": {
    "description": "This is an API documentation for SmartOpen.",
    "version": "1.0.0",
    "title": "Mobetize smartOpen",
    "termsOfService": "http://mobetize.com",
    "contact": {
      "email": "egadalid@mobetize.com"
    },
    "license": {
      "name": "Apache 2.0",
      "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
    }
  },
  "tags": [
    {
      "name": "Registration",
      "description": "Registration process",
      "externalDocs": {
        "description": "Find out more",
        "url": "https://drive.google.com/file/d/1LaTiSLVEwyX7AfYKZ-MJFbE5I-xL56T_/view?usp=sharing"
      }
    },
    {
      "name": "User",
      "description": "Operations for User"
    },
    {
      "name": "Product",
      "description": "Product information api"
    }
  ],
  "paths": {
    "/phone/{phoneNumber}/register": {
      "post": {
        "tags": [
          "Registration"
        ],
        "description": "Validate phone number. A code will be sent to the phone number.",
        "operationId": "registerPhoneNumber",
        "parameters": [
          {
            "name": "phoneNumber",
            "in": "path",
            "description": "Phone number of customer.",
            "required": true,
            "type": "integer",
            "maximum": 10,
            "minimum": 1,
            "format": "int64"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Registration Id Code",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Registration"
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/Success"
          },
          "400": {
            "$ref": "#/responses/Error"
          }
        },
        "summary": "Initial registration using phone",
        "externalDocs": {
          "description": "Wireframe page",
          "url": "https://xd.adobe.com/view/899ba896-3e8f-4e20-9ba5-3807988bbe3a-dcc8/screen/c867e2c2-03e0-4c92-95d7-aa5659a4c792/All-users-192"
        }
      }
    },
    "/phone/{phoneNumber}/verify": {
      "get": {
        "tags": [
          "Registration"
        ],
        "description": "Validate phone number. An account will be created associated with the phone number.",
        "operationId": "validatePhoneNumber",
        "parameters": [
          {
            "name": "phoneNumber",
            "in": "path",
            "description": "Phone number of customer.",
            "required": true,
            "type": "integer",
            "maximum": 10,
            "minimum": 1,
            "format": "int64"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Validation Code",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Registration"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/User"
            }
          },
          "400": {
            "description": "Invalid validation code"
          }
        },
        "summary": "Phone validation",
        "externalDocs": {
          "description": "Wireframe page",
          "url": "https://xd.adobe.com/view/899ba896-3e8f-4e20-9ba5-3807988bbe3a-dcc8/screen/329e9aa9-2cfc-4fba-94bd-cdd21a293823/All-users-193"
        }
      }
    },
    "/product/list": {
      "get": {
        "tags": [
          "Product"
        ],
        "description": "Get banking products available.",
        "operationId": "getProducts",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Array of products",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Product"
              }
            }
          }
        },
        "summary": "Get banking products",
        "externalDocs": {
          "description": "Wireframe page",
          "url": "https://xd.adobe.com/view/899ba896-3e8f-4e20-9ba5-3807988bbe3a-dcc8/screen/ff3a5700-5611-4608-acea-b9e8ea6422cd/All-users-63"
        }
      }
    },
    "/product/{productId}": {
      "get": {
        "tags": [
          "Product"
        ],
        "description": "Get banking products available.",
        "operationId": "getProduct",
        "parameters": [{
          "name": "productId",
          "in": "path",
          "description": "Product id.",
          "required": true,
          "type": "integer",
          "format": "int32"
        }],
        "responses": {
          "200": {
            "$ref": "#/definitions/ProductDetail"
          }
        },
        "summary": "Get banking products",
        "externalDocs": {
          "description": "Wireframe page",
          "url": "https://xd.adobe.com/view/899ba896-3e8f-4e20-9ba5-3807988bbe3a-dcc8/screen/113957be-7ed7-47b5-b73f-5ea40ed15467/All-users-65"
        }
      }
    },
    "/phone/{phoneNumber}/resend": {
      "post": {
        "tags": [
          "Registration"
        ],
        "description": "Resend validation code to phone number.",
        "operationId": "resendPhoneCode",
        "parameters": [
          {
            "name": "phoneNumber",
            "in": "path",
            "description": "Phone number of customer.",
            "required": true,
            "type": "integer",
            "maximum": 10,
            "minimum": 1,
            "format": "int64"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Registration Id Code",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Registration"
            }
          }
        ],
        "responses": {
          "200": {            
            "$ref": "#/responses/Success"
          }
        },
        "summary": "Resend validation code",
        "externalDocs": {
          "description": "Wireframe page",
          "url": "https://xd.adobe.com/view/899ba896-3e8f-4e20-9ba5-3807988bbe3a-dcc8/screen/329e9aa9-2cfc-4fba-94bd-cdd21a293823/All-users-193"
        }
      }
    },
    "/application": {
      "post": {
        "tags": [
          "application"
        ],
        "summary": "Add a new application",
        "operationId": "addApplication",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Application object that needs to be added to the store",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Application"
            }
          }
        ],
        "responses": {
          "405": {
            "description": "Invalid input"
          }
        }
      },
      "put": {
        "tags": [
          "Application"
        ],
        "summary": "Update an existing Application",
        "operationId": "updateApplication",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Application object that needs to be added to the store",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Application"
            }
          }
        ],
        "responses": {
          "400": {
            "description": "Invalid ID supplied"
          },
          "404": {
            "description": "Application not found"
          },
          "405": {
            "description": "Registration exception"
          }
        }
      }
    },
    "/user/{id}/uploadImage": {
      "post": {
        "tags": [
          "User"
        ],
        "summary": "uploads an image",
        "operationId": "uploadFile",
        "consumes": [
          "multipart/form-data"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID of the user",
            "required": true,
            "type": "integer",
            "format": "string"
          },
          {
            "name": "additionalMetadata",
            "in": "formData",
            "description": "Additional data to pass to server",
            "required": false,
            "type": "string"
          },
          {
            "name": "file",
            "in": "formData",
            "description": "file to upload",
            "required": false,
            "type": "file"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/User"
            }
          }
        }
      }
    },
    "/user/{id}/password": {
      "post": {
        "tags": [
          "User"
        ],
        "summary": "Set user password",
        "description": "Update user password",
        "operationId": "setPassword",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID of the user",
            "required": true,
            "type": "integer",
            "format": "string"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Password data",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Password"
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/Success"
          }
        },
        "externalDocs": {
          "description": "Wireframe page",
          "url": "https://xd.adobe.com/view/899ba896-3e8f-4e20-9ba5-3807988bbe3a-dcc8/screen/c867e2c2-03e0-4c92-95d7-aa5659a4c792/All-users-194"
        }
      }
    },
    "/user/{id}/confirm": {
      "post": {
        "tags": [
          "User"
        ],
        "summary": "Confirm terms and conditions",
        "operationId": "confirmTermsAndConditions",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID of the user",
            "required": true,
            "type": "integer",
            "format": "string"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Confirm registration",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Confirmation"
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/Success"
          }
        },
        "externalDocs": {
          "description": "Wireframe page",
          "url": "https://xd.adobe.com/view/899ba896-3e8f-4e20-9ba5-3807988bbe3a-dcc8/screen/c867e2c2-03e0-4c92-95d7-aa5659a4c792/All-users-197"
        }
      }
    },
    "/user/login": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Logs User into the system",
        "operationId": "loginUser",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "User credentials",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Credential"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "type": "string"
            },
            "headers": {
              "X-Rate-Limit": {
                "type": "integer",
                "format": "int32",
                "description": "calls per hour allowed by the User"
              },
              "X-Expires-After": {
                "type": "string",
                "format": "date-time",
                "description": "date in UTC when token expires"
              }
            }
          },
          "400": {
            "description": "Invalid username/password supplied"
          }
        },
        "externalDocs": {
          "description": "Wireframe page",
          "url": "https://xd.adobe.com/view/899ba896-3e8f-4e20-9ba5-3807988bbe3a-dcc8/screen/d6bee184-49a1-4e87-8a1c-14abb0a932db/All-users-64"
        }
      }
    },
    "/user/logout": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Logs out current logged in User session",
        "operationId": "logoutUser",
        "produces": [
          "application/json"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "$ref": "#/responses/Success"
          }
        }
      }
    },
    "/user/{username}": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Get User by User name",
        "operationId": "getUserByName",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "username",
            "in": "path",
            "description": "The name that needs to be fetched. Use user1 for testing.",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "schema": {
              "$ref": "#/definitions/User"
            }
          },
          "400": {
            "description": "Invalid username supplied"
          },
          "404": {
            "description": "User not found"
          }
        }
      },
      "put": {
        "tags": [
          "User"
        ],
        "summary": "Updated User",
        "description": "This can only be done by the logged in User.",
        "operationId": "updateUser",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "username",
            "in": "path",
            "description": "name that need to be updated",
            "required": true,
            "type": "string"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Updated User object",
            "required": true,
            "schema": {
              "$ref": "#/definitions/User"
            }
          }
        ],
        "responses": {
          "400": {
            "description": "Invalid User supplied"
          },
          "404": {
            "description": "User not found"
          }
        }
      },
      "delete": {
        "tags": [
          "User"
        ],
        "summary": "Delete User",
        "description": "This can only be done by the logged in User.",
        "operationId": "deleteUser",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "username",
            "in": "path",
            "description": "The name that needs to be deleted",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "400": {
            "description": "Invalid username supplied"
          },
          "404": {
            "description": "User not found"
          }
        }
      }
    }
  },
  "responses": {
    "Success": {
      "description": "Success",
      "schema": {
        "$ref": "#/definitions/ApiResponse"
      },
      "headers": {
        "X-Process-Id": {
          "type": "string"
        }
      }
    },
    "Error": {
      "description": "Error",
      "schema": {
        "$ref": "#/definitions/ApiResponse"
      },
      "headers": {
        "X-Process-Id": {
          "type": "string"
        }
      }
    }
  },
  "securityDefinitions": {
    "smartOpen_auth": {
      "type": "oauth2",
      "authorizationUrl": "http://smartOpen.mobetize.com/oauth/dialog",
      "flow": "implicit"
    },
    "api_key": {
      "type": "apiKey",
      "name": "api_key",
      "in": "header"
    }
  },
  "definitions": {
    "Password": {
      "type": "object",
      "properties": {
        "password": {
          "type": "string"
        }
      },
      "example": {
        "password": "Mobetiz3!"
      }
    },
    "Registration": {
      "type": "object",
      "properties": {
        "registrationId": {
          "type": "string"
        }
      },
      "example": {
        "registrationId": "cdd21ddd-fe0c-4b0f-9a0a-91ab19e0915e"
      }
    },
    "Validation": {
      "type": "object",
      "properties": {
        "validationCode": {
          "type": "string"
        }
      },
      "example": {
        "registrationId": "e2e33ac5-ff77-4d5c-8932-85f1903fb7f2"
      }
    },
    "Credential": {
      "type": "object",
      "properties": {
        "email": {
          "type": "string"
        },
        "password": {
          "type": "string"
        }
      },
      "example": {
        "registrationId": "e2e33ac5-ff77-4d5c-8932-85f1903fb7f2"
      }
    },
    "Confirmation": {
      "type": "object",
      "properties": {
        "offers": {
          "type": "boolean"
        }
      },
      "example": {
        "offers": "true"
      }
    },
    "Order": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int64"
        },
        "ApplicationId": {
          "type": "integer",
          "format": "int64"
        },
        "quantity": {
          "type": "integer",
          "format": "int32"
        },
        "shipDate": {
          "type": "string",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "Order Status",
          "enum": [
            "placed",
            "approved",
            "delivered"
          ]
        },
        "complete": {
          "type": "boolean",
          "default": false
        }
      },
      "xml": {
        "name": "Order"
      }
    },
    "Category": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int64"
        },
        "name": {
          "type": "string"
        }
      },
      "xml": {
        "name": "Category"
      }
    },
    "User": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "example": "97e64ab0-8970-4eba-a5fd-8599af126761"
        },
        "username": {
          "type": "string"
        },
        "firstName": {
          "type": "string",
          "example": "Edwin"
        },
        "lastName": {
          "type": "string",
          "example": "Adalid"
        },
        "email": {
          "type": "string",
          "example": "egadalid@mobetize.com"
        },
        "phone": {
          "type": "string",
          "example": "7788773701"
        },
        "userStatus": {
          "type": "integer",
          "format": "int32",
          "description": "User Status",
          "example": 1
        }
      },
      "xml": {
        "name": "User"
      }
    },
    "Application": {
      "type": "object",
      "required": [
        "name",
        "photoUrls"
      ],
      "properties": {
        "id": {
          "type": "integer",
          "format": "int64"
        },
        "category": {
          "$ref": "#/definitions/Category"
        },
        "name": {
          "type": "string",
          "example": "doggie"
        },
        "photoUrls": {
          "type": "array",
          "xml": {
            "name": "photoUrl",
            "wrapped": true
          },
          "items": {
            "type": "string"
          }
        },
        "status": {
          "type": "string",
          "description": "Application status in the store",
          "enum": [
            "available",
            "pending",
            "sold"
          ]
        }
      }
    },
    "Product": {
      "type": "object",
      "properties": {
        "productId": {
          "type": "integer",
          "format": "int32"
        },
        "name": {
          "type": "string"
        },
        "parentId": {
          "type": "integer",
          "format": "int32"
        }
      },
      "example":{
        "productId": 9,
        "name": "Personal Savings",
        "parentId": 1
      }
    },
    "ProductDetail": {
      "allOf": [{
        "$ref": "#/definitions/Product"
      },{
        "type": "object",
        "properties": {
          "description": {
            "type": "string"
          }
        }
      }]
    },
    "ApiResponse": {
      "type": "object",
      "properties": {
        "code": {
          "type": "string"
        },
        "message": {
          "type": "string"
        }
      }
    }
  },
  "externalDocs": {
    "description": "GUI Wireframe",
    "url": "https://xd.adobe.com/view/899ba896-3e8f-4e20-9ba5-3807988bbe3a-dcc8/"
  },
  "host": "virtserver.swaggerhub.com",
  "basePath": "/Mobetize/SmartOpen/1.0.0",
  "schemes": [
    "https",
    "http"
  ]
}